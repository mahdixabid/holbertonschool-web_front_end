<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 6</title>
        <script
			  src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
			  integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
              crossorigin="anonymous">
        </script>
        
    </head>

    <body>
        <script type="application/javascript">
            $( document ).ready(function() {
                function createFamilyTree() {
                    $("body").append("<table>");
                    $("table").append(`
                        <thead>
                            <tr>
                                <th>Firstname</th>
                                <th>Lastname</th>
                            </tr>
                        </thead>
                    `, "<tbody>");
                }
                function addNewMember(firstName, lastName, position) {
                    if (position == "before") {
                        $("table tbody").prepend("<tr>ANTES</tr>");
                        $("tbody tr").first().append(`<td>${firstName}</td>`, `<td>${lastName}</td>`, `<td>(x)</td>`);
                        $("tbody tr td").eq(2).addClass(firstName + lastName);
                    }
                    else {
                        $("table tbody").append("<tr>");
                        $("tbody tr").last().append(`<td>${firstName}</td>`, `<td>${lastName}</td>`, `<td>(x)</td>`);
                        $("tbody tr td").last().addClass(firstName + lastName);
                    }
                    $("." + firstName + lastName).css("background-color", "orange");
                    $("." + firstName + lastName).click(function() {
                        $("." + firstName + lastName).parent().remove();               
                    });
                }
                function createForm() {
                    $("body").prepend("<input type=\"text\">", "<input type=\"text\">", "<select>", "<input value=\"Submit\" type=\"submit\">");
                    $("input").first().addClass("firstName");
                    $("input").eq(1).addClass("lastName");
                    $("select").addClass("selection");
                    $(".selection").append("<option value=\"before\">Before</option>", "<option value=\"after\">After</option>");
                    $("input").last().click(function() {
                        let pos = $(".selection option").filter(":selected").val();
                        addNewMember($(".firstName").val(), $(".lastName").val(), pos);
                    })
                }
                createFamilyTree();
                createForm();
            });
        </script>
    </body>

</html>
